ПОРЯДОК ОБНОВЛЕНИЯ ПРЕДЫДУЩИХ ВЕРСИЙ ArwShop Market ДО ПОСЛЕДНЕЙ ВЕРСИИ

ВНИМАНИЕ! ВАЖНО! Во избежание ошибок не предпринимайте никаких действий, не прочитав настоящую инструкцию полностью до конца!

Прежде всего, убедитесь, что Ваш сервер соответствует требованиям к хостингу: http://www.arwshop.ru/hosting-requirements.html

Если у Вас уже установлена более ранняя версия продукта, для того чтобы произвести обновление до последней версии, необходимо сделать следующее, соблюдая последовательность действий:


1. Зайдите в панель администрирования в раздел "Инструменты / Резервное копирование базы данных" и обязательно сделайте резервную копию базы данных.


2. Откройте в текстовом редакторе файл copyright, посмотрите в нём точную версию продукта, который в настоящий момент установлен на сайте и запомните или запишите точную версию продукта.
Подсказка:
Для того чтобы открыть какой-либо файл с помощью программы "Блокнот" ("Notepad") в операционной системе Windows, расширение которого не зарегистрировано на вашем компьютере или файлы с таким расширением по умолчанию уже открываются какой-то другой программой, нужно сделать следующее: нажать кнопку "Пуск" на панели задач (по умолчанию внизу слева в Проводнике Windows), в появившемся меню выбрать "Программы / Стандартные / Блокнот". В окне программы "Блокнот" выбрать пункт меню "Файл / Открыть", в появившемся диалоговом окне выбрать Тип файлов: "Все файлы", затем выбрать нужный файл для открытия.


3. Сделайте полную резервную копию всего сайта (или только папки в которую установлен продукт, если продукт установлен не в корень сайта). Для резервного копирования сайта воспользуйтесь, например, FTP доступом к сайту или инструментами, предоставляемыми хостингом.


4. Загрузите на сайт файлы из архива (предварительно распаковав архив), заменив имеющиеся, добавив новые (если есть новые). Никакие файлы и папки предварительно удалять с сайта не надо, нужно только их заменить.

Папку install загружать на сайт не надо.

Если Вы изменяли файлы-шаблоны почтовых сообщений в папке mail_tpl, то эти файлы с совпадающими именами заменять не надо, нужно только добавить новые, если таковые имеются, и при необходимости внести изменения в имеющиеся файлы, если описание нововведений для этих шаблонов имеется ниже в настоящей инструкции.

Программно-конструктивные дополнения (если таковые имеются), внесённые в шаблоны дизайна для каждой из версий продукта описаны ниже в настоящей инструкции. В случае необходимости, внесите описанные ниже изменения (если программно-конструктивные дополнения имеются для обновляемой версии продукта) в изменённый Вами вариант дизайна, либо просто замените описанные ниже файлы.


5. Если обновляемая версия продукта отличается от ранее установленной версии продукта на 1/10 (одну десятую часть единицы) или более (например, старая версия 2.2.15, новая версия 2.2.48 - обновление базы данных не требуется; старая версия 2.2.15, новая версия 2.3.0 - в этом случае требуется обновление базы данных), то после открытия продукта в браузере будет выведено сообщение о необходимости обновления структуры базы данных. В этом случае наберите в адресной строке браузера адрес http://АДРЕС-КУДА-УСТАНОВЛЕН-ПРОДУКТ/update/index.php (пример: http://www.arwshop.ru/update/index.php или http://www.arwshop.ru/shop/update/index.php в зависимости от папки, в которую установлен продукт, где вместо www.arwshop.ru Ваш домен) и выполните обновление структуры базы данных, следуя инструкциям скрипта обновления структуры базы данных update/index.php


6. Если выполнялся предыдущий пункт (обновление структуры базы данных), зайдите в панель администрирования в раздел "Инструменты / Резервное копирование базы данных" и сделайте резервную копию обновлённой базы данных.


7. Если предыдущая обновляемая верия была меньше 2.3, то при необходимости нужно установить атрибуты, разрешающие запись на папку ecache в которой будут сохраняться кэшированные страницы.
Если предыдущая обновляемая верия была меньше 2.0, то при необходимости нужно установить атрибуты, разрешающие запись на папку pubfiles, в которую будут загружаться файлы для публикации.


ВНИМАНИЕ!
Если Вы используете платёжный модуль WebMoney Merchant, необходимо изменить метод формирования контрольной подписи на SHA256 для используемых кошельков в личном кабинете WebMoney Merchant.
Подробное описание в файле pm_modules/wm_merchant/signature-method.txt

Если производилось обновление версии, которая была ниже 2.0, то необходимо зайти в раздел панели администрирования "Настройки / Основная конфигурация", проверить значение "Статус оплаченных заказов" и сохранить изменения. Установите значение "Оплачен" или другое, но НЕ "Новый". Это значение НЕ должно быть "Новый".

---------------------------------------------------------------------------------------



ОПИСАНИЕ ПРОГРАММНО-КОНСТРУКТИВНЫХ ДОПОЛНЕНИЙ ФАЙЛОВ ДИЗАЙНА

В версии 3.0.0 весь старый дизайн (seawave, autumn, steelblue) полностью обновлён (вёрстка и CSS). Новые имена дизайна: seawave2, autumn2, steelblue2.

Описание программно-конструктивных дополнений старых шаблонов дизайна (seawave, autumn, steelblue) из версий продукта 1.xx и 2.xx смотрите в файле old-design-changes.txt.

------------------------------

Версия продукта: 3.1.5
Файл: manufacturers.tpl
Обязательное дополнение: нет
Для возможности разбиения на страницы списка производителей /manufacturers/ (1000 производителей на странице) в файл manufacturers.tpl добавлен код:

<div class="pages_links">{pages_links}</div>

Данное дополнение не обязательно. При отсутствии в файле manufacturers.tpl метки {pages_links} будут выводиться все производители на одной странице.

------------------------------

Версия продукта: 3.3.0
Файл: deliverymethod_detail.tpl
Обязательное дополнение: нет
Для возможности отображения суммы заказа, от которой магазин осуществляет бесплатную доставку, доступную для данного способа доставки, между метками <!--if:delivery_cost--> и <!--/if:delivery_cost-->
добавлен код:

<div class="free_delivery_sum">{lang.free_delivery_from}: {free_delivery_sum}</div>

------------------------------

Подробнее, за какие функции отвечает определённый шаблон и его описание можно прочитать в файлах помощи в разделе "Изменение дизайна" (файл help.html в корне или файл index.html в папке help) или http://demo.arwshop.ru/help/design.html

---------------------------------------------------------------------------------------



ОПИСАНИЕ ПРОГРАММНО-КОНСТРУКТИВНЫХ ИЗМЕНЕНИЙ ШАБЛОНОВ ПОЧТОВЫХ СООБЩЕНИЙ (файлы находятся в папке mail_tpl)
------------------------------

Версия продукта: 2.0.0
Файл: admin_change_user_group.tpl
В связи с изменением системы скидок для групп опльзователей (теперь для группы может быть любое количество скидок) из файла admin_change_user_group.tpl исключена метка {discount}. Начиная с версии 2.0.0 заменяется пустым значением.

------------------------------

Версия продукта: 2.0.0
Файл: order_admin.tpl - шаблон письма, отправляемого администратору после оформления заказа 
Для вставки в текст письма дополнительного описания способа оплаты для эл.почты (например, реквизиты для оплаты) добавлена метка {adv_descript_mail}

------------------------------

Версия продукта: 2.0.0
Файл: order_shopper.tpl - шаблон письма, отправляемого покупателю после оформления заказа
Для вставки в текст письма заполненных дополнительных полей формы заказа добавлена метка {additional_fields}.
Для вставки в текст письма дополнительного описания способа оплаты для эл.почты (например, реквизиты для оплаты) добавлена метка {adv_descript_mail}

------------------------------

Версия продукта: 2.0.0
Файл: payment_notifi_admin.tpl
Добавлен файл payment_notifi_admin.tpl - шаблон письма, отправляемого администратору после успешной автоматической оплаты с использованием модуля оплаты 

------------------------------

Версия продукта: 2.0.0
Файл: payment_notifi_shopper.tpl
Добавлен файл payment_notifi_shopper.tpl - шаблон письма, отправляемого покупателю после успешной автоматической оплаты с использованием модуля оплаты 

------------------------------

Версия продукта: 2.0.0
Файл: product_comment_added.tpl
Добавлен файл product_comment_added.tpl - шаблон письма, отправляемого администратору после добавления комментария к товару 

------------------------------

Версия продукта: 2.0.0
Файл: product_comment_reply_notifi_user.tpl
Добавлен файл product_comment_reply_notifi_user.tpl - шаблон письма, отправляемого отправителю комментария после ответа администратора на комментарий 

------------------------------

Если Вы не изменяли вышеперечисленные файлы-шаблоны почтовых сообщений, достаточно их просто заменить/добавить новые.

Подробнее, за какие функции отвечает определённый шаблон и его описание можно прочитать в файлах помощи в разделе "Почтовые сообщения" (файл help.html в корне или файл index.html в папке help).


---------------------------------------------------------------------------------------
